<?xml version="1.0"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>StatSVN - Directory hardware/peripheralinterface/mouse_test/</title>
 <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"/>
    <meta name="Generator" content="StatSVN 0.7.0"/>
<link rel="stylesheet" href="objectlab-statcvs.css" type="text/css"/>
<script type="text/javascript" charset="utf-8" src="http://bit.ly/javascript-api.js?version=latest&#38;login=statsvn&#38;apiKey=R_2c362b417d0517c27876cbaca1bb68cc"></script>
<script type="text/javascript" charset="utf-8">
   // wait until page is loaded to call API
   var redir_url;
   var short_url;
   BitlyCB.myShortenCallback = function(data) {
      // this is how to get a result of shortening a single url
      var result;
      short_url=null;
      for (var r in data.results) {
         result = data.results[r];
         result['longUrl'] = r;
         short_url = result['shortUrl'];
         break;
      }
      if (short_url==null) // bit.ly failed
      document.location=redir_url;
      else
      redirToTwitter();
   };
   function shortenTweet(url) {
      if (short_url == null || redir_url!=url) {
      redir_url = url;
      BitlyClient.shorten(document.location, 'BitlyCB.myShortenCallback');
      }
      else
      redirToTwitter();
      return false;
   }
   function redirToTwitter() { 
      // replace {0} which is visible as %7B0} in the link
      document.location = redir_url.replace('%7B0}', short_url);
   }
</script>
  </head>

<body>

<h1>Directory hardware/peripheralinterface/mouse_test/</h1>
<div id="parentlink">&#171; <a href="index.html">Development Statistics for </a></div>
<dl class="attributes">
    <dt>Directory Created:</dt>
    <dd><span class="date">2011-03-02 18:59</span></dd>
    <dt>Total Files:</dt>
    <dd>14</dd>
    <dt>Deleted Files:</dt>
    <dd>2</dd>
    <dt>Lines of Code:</dt>
    <dd>5165</dd>
</dl>
<p class="dirtree">
<a href="dir.html">[root]</a>/<a href="dir_hardware.html">hardware</a>/<a href="dir_hardware_peripheralinterface.html">peripheralinterface</a>/<strong>mouse_test</strong><br/>
</p>

<div class="section">
<h2>Lines of Code</h2>
<p class="chart"><img src="loc_module_hardware_peripheralinterface_mouse_test.png" alt="hardware/peripheralinterface/mouse_test/ Lines of Code" width="800" height="500" /></p></div>
<div class="section">
<h2>Developers</h2>
  <table  rules="groups" summary="All authors and the number of their changes and lines of code in this directory">
    <colgroup align="left"/>
    <colgroup align="right"/>
    <colgroup align="right"/>
    <colgroup align="right"/>
    <thead>
      <tr>
        <th>Author</th>
        <th>Changes</th>
        <th>Lines of Code</th>
        <th>Lines per Change</th>
      </tr>
    </thead>
    <tbody>
      <tr  class="odd">
        <th><a href="user_nordstro.html" class="author">nordstro</a></th>
        <td>65 (100.0%)</td>
        <td>5949 (100.0%)</td>
        <td>91.5</td>
      </tr>
    </tbody>
  </table>

</div>
<div class="section">
<h2>Most Recent Commits</h2>
<dl class="commitlist">
  <dt><a name="18"></a>
    <a href="user_nordstro.html" class="author">nordstro</a>
    <span class="date">2011-03-06 01:47</span>
    <span class="revisionNumberOuter">Rev.: <span class="revisionNumberInner">238</span></span>
  </dt>
  <dd>
    <p class="comment">
Revamped keyboard RX is working BUT i think a couple keys might be typo'd on scan_to_ascii (i say this because Shift+A gave me 0x61,0x00    ('a',(null) ) instead of the actual ascii for A<br />
<br />
calling it a night
    </p>
    <p class="commitdetails"><strong>9</strong> lines of code changed in <span class="files">1 file</span>:</p>
    <ul class="commitdetails">
      <li>
        <strong>hardware/peripheralinterface/mouse_test</strong>:
        tick_logic.v&#160;<span class="change">(+9&#160;-10)</span>
      </li>
    </ul>
  </dd>

  <dt><a name="17"></a>
    <a href="user_nordstro.html" class="author">nordstro</a>
    <span class="date">2011-03-06 01:14</span>
    <span class="revisionNumberOuter">Rev.: <span class="revisionNumberInner">236</span></span>
  </dt>
  <dd>
    <p class="comment">
Moving files<br />

    </p>
    <p class="commitdetails"><strong>0</strong> lines of code changed in <span class="files">1 file</span>:</p>
    <ul class="commitdetails">
      <li>
        <strong>hardware/peripheralinterface/mouse_test</strong>:
        ps2_rx.v&#160;<span class="del">(del)</span>
      </li>
    </ul>
  </dd>

  <dt><a name="16"></a>
    <a href="user_nordstro.html" class="author">nordstro</a>
    <span class="date">2011-03-06 01:06</span>
    <span class="revisionNumberOuter">Rev.: <span class="revisionNumberInner">235</span></span>
  </dt>
  <dd>
    <p class="comment">
Re-organizing keyboard/mouse code:<br />
<br />
Lowest level --&gt; ps2_rx.v, ps2_tx.v<br />
Next level   --&gt; kbd_rx.v, scan_to_ascii.v<br />
Highest lvl  --&gt; (*kbd_cntrl.v), mouse_cntrl.v<br />
<br />
*Note: I'm not sure &lt;kbd_cntrl.v&gt; will be necessary. It would only really be used if we wanted to be able to set the caps/num/scroll lock LEDs
    </p>
    <p class="commitdetails"><strong>235</strong> lines of code changed in <span class="files">4 files</span>:</p>
    <ul class="commitdetails">
      <li>
        <strong>hardware/peripheralinterface/mouse_test</strong>:
        mouse_cntr.v&#160;<span class="change">(+17&#160;-14)</span>,
        ps2_rx.v&#160;<span class="new">(new&#160;120)</span>,
        ps2_rx_tb.v&#160;<span class="new">(new&#160;84)</span>,
        tick_logic.v&#160;<span class="change">(+14&#160;-12)</span>
      </li>
    </ul>
  </dd>

  <dt><a name="15"></a>
    <a href="user_nordstro.html" class="author">nordstro</a>
    <span class="date">2011-03-05 22:47</span>
    <span class="revisionNumberOuter">Rev.: <span class="revisionNumberInner">234</span></span>
  </dt>
  <dd>
    <p class="comment">
Tried to clean up my code, but some functionality seems to have changed. About to revamp the ps/2 code by breaking it into an RX and a TX module, with another controller module to deal with enable/disable them and tri-stating
    </p>
    <p class="commitdetails"><strong>86</strong> lines of code changed in <span class="files">4 files</span>:</p>
    <ul class="commitdetails">
      <li>
        <strong>hardware/peripheralinterface/mouse_test</strong>:
        mouse.v&#160;<span class="change">(+25&#160;-24)</span>,
        mouse_cntr.v&#160;<span class="change">(+41&#160;-72)</span>,
        mouse_tb.do&#160;<span class="change">(+12&#160;-10)</span>,
        mouse_tb.v&#160;<span class="change">(+8&#160;-12)</span>
      </li>
    </ul>
  </dd>

  <dt><a name="14"></a>
    <a href="user_nordstro.html" class="author">nordstro</a>
    <span class="date">2011-03-05 19:50</span>
    <span class="revisionNumberOuter">Rev.: <span class="revisionNumberInner">233</span></span>
  </dt>
  <dd>
    <p class="comment">
gahhh
    </p>
    <p class="commitdetails"><strong>48</strong> lines of code changed in <span class="files">4 files</span>:</p>
    <ul class="commitdetails">
      <li>
        <strong>hardware/peripheralinterface/mouse_test</strong>:
        mouse.v&#160;<span class="change">(+9&#160;-7)</span>,
        mouse_cntr.v&#160;<span class="change">(+7&#160;-6)</span>,
        mouse_tb.do&#160;<span class="change">(+29&#160;-29)</span>,
        mouse_tb.v&#160;<span class="change">(+3&#160;-4)</span>
      </li>
    </ul>
  </dd>

  <dt><a name="13"></a>
    <a href="user_nordstro.html" class="author">nordstro</a>
    <span class="date">2011-03-05 19:02</span>
    <span class="revisionNumberOuter">Rev.: <span class="revisionNumberInner">232</span></span>
  </dt>
  <dd>
    <p class="comment">
still debugging mouse. working on sending signals to the keyboard for now
    </p>
    <p class="commitdetails"><strong>108</strong> lines of code changed in <span class="files">5 files</span>:</p>
    <ul class="commitdetails">
      <li>
        <strong>hardware/peripheralinterface/mouse_test</strong>:
        mouse.v&#160;<span class="change">(+17&#160;-16)</span>,
        mouse_cntr.v&#160;<span class="change">(+60&#160;-49)</span>,
        mouse_tb.do&#160;<span class="change">(+16&#160;-49)</span>,
        mouse_tb.v&#160;<span class="change">(+7&#160;-6)</span>,
        tick_logic.v&#160;<span class="change">(+8&#160;-9)</span>
      </li>
    </ul>
  </dd>

  <dt><a name="12"></a>
    <a href="user_nordstro.html" class="author">nordstro</a>
    <span class="date">2011-03-05 15:44</span>
    <span class="revisionNumberOuter">Rev.: <span class="revisionNumberInner">230</span></span>
  </dt>
  <dd>
    <p class="comment">
Ahhh the stupid mistakes never end...
    </p>
    <p class="commitdetails"><strong>24</strong> lines of code changed in <span class="files">3 files</span>:</p>
    <ul class="commitdetails">
      <li>
        <strong>hardware/peripheralinterface/mouse_test</strong>:
        mouse.v&#160;<span class="change">(+1&#160;-1)</span>,
        mouse_tb.do&#160;<span class="change">(+21&#160;-14)</span>,
        mouse_tb.v&#160;<span class="change">(+2&#160;-2)</span>
      </li>
    </ul>
  </dd>

  <dt><a name="11"></a>
    <a href="user_nordstro.html" class="author">nordstro</a>
    <span class="date">2011-03-04 17:38</span>
    <span class="revisionNumberOuter">Rev.: <span class="revisionNumberInner">223</span></span>
  </dt>
  <dd>
    <p class="comment">
Epiphany of the day: If your register logic gets changed on the falling edge of the mouse_clk, and during transmission you hold that signal low, your logic aint gonna do shit...<br />
<br />
Mouse still NOT working. Note to self: Check how the data is being transmitted after the clk line is released.
    </p>
    <p class="commitdetails"><strong>47</strong> lines of code changed in <span class="files">3 files</span>:</p>
    <ul class="commitdetails">
      <li>
        <strong>hardware/peripheralinterface/mouse_test</strong>:
        mouse.v&#160;<span class="change">(+27&#160;-11)</span>,
        mouse_cntr.v&#160;<span class="change">(+18&#160;-4)</span>,
        tick_logic.v&#160;<span class="change">(+2&#160;-5)</span>
      </li>
    </ul>
  </dd>

  <dt><a name="10"></a>
    <a href="user_nordstro.html" class="author">nordstro</a>
    <span class="date">2011-03-04 16:32</span>
    <span class="revisionNumberOuter">Rev.: <span class="revisionNumberInner">222</span></span>
  </dt>
  <dd>
    <p class="comment">
Added support to keep track of the last 6 values read in from the mouse. Changed the format of how they are displayed as well -- this is described in the comments.<br />
<br />
Also added the waveform file from prev commit
    </p>
    <p class="commitdetails"><strong>127</strong> lines of code changed in <span class="files">3 files</span>:</p>
    <ul class="commitdetails">
      <li>
        <strong>hardware/peripheralinterface/mouse_test</strong>:
        mouse_cntr.v&#160;<span class="change">(+29&#160;-24)</span>,
        mouse_tb.do&#160;<span class="new">(new&#160;87)</span>,
        tick_logic.v&#160;<span class="change">(+11&#160;-18)</span>
      </li>
    </ul>
  </dd>

  <dt><a name="9"></a>
    <a href="user_nordstro.html" class="author">nordstro</a>
    <span class="date">2011-03-04 15:54</span>
    <span class="revisionNumberOuter">Rev.: <span class="revisionNumberInner">219</span></span>
  </dt>
  <dd>
    <p class="comment">
Ummmmmmmmmm it'd probably be good to instantiate all my registers.... (aka &lt;tbr&gt;). Hopefully this will fix the whole transmit problem.<br />
<br />
Latched the mouse.v &lt;rst&gt; signal for good measure<br />
<br />
Added testbench (and go figure, modelsim immediately made me aware of a trivially huge bug)
    </p>
    <p class="commitdetails"><strong>83</strong> lines of code changed in <span class="files">3 files</span>:</p>
    <ul class="commitdetails">
      <li>
        <strong>hardware/peripheralinterface/mouse_test</strong>:
        mouse.v&#160;<span class="change">(+12&#160;-1)</span>,
        mouse_cntr.v&#160;<span class="change">(+2)</span>,
        mouse_tb.v&#160;<span class="new">(new&#160;69)</span>
      </li>
    </ul>
  </dd>

  <dt><a name="8"></a>
    <a href="user_nordstro.html" class="author">nordstro</a>
    <span class="date">2011-03-04 14:34</span>
    <span class="revisionNumberOuter">Rev.: <span class="revisionNumberInner">218</span></span>
  </dt>
  <dd>
    <p class="comment">
Reading from the mouse. Something is going wrong when trying to send data to it. About to dig into modelsim to check my code
    </p>
    <p class="commitdetails"><strong>4134</strong> lines of code changed in <span class="files">3 files</span>:</p>
    <ul class="commitdetails">
      <li>
        <strong>hardware/peripheralinterface/mouse_test</strong>:
        mouse_cntr.v&#160;<span class="change">(+21&#160;-13)</span>,
        numbers.mem&#160;<span class="new">(new&#160;4097)</span>,
        tick_logic.v&#160;<span class="change">(+16&#160;-4)</span>
      </li>
    </ul>
  </dd>

  <dt><a name="7"></a>
    <a href="user_nordstro.html" class="author">nordstro</a>
    <span class="date">2011-03-03 14:18</span>
    <span class="revisionNumberOuter">Rev.: <span class="revisionNumberInner">206</span></span>
  </dt>
  <dd>
    <p class="comment">
Stupid stupid stupid error.<br />

    </p>
    <p class="commitdetails"><strong>2</strong> lines of code changed in <span class="files">1 file</span>:</p>
    <ul class="commitdetails">
      <li>
        <strong>hardware/peripheralinterface/mouse_test</strong>:
        mouse.v&#160;<span class="change">(+2&#160;-1)</span>
      </li>
    </ul>
  </dd>

  <dt><a name="6"></a>
    <a href="user_nordstro.html" class="author">nordstro</a>
    <span class="date">2011-03-03 10:31</span>
    <span class="revisionNumberOuter">Rev.: <span class="revisionNumberInner">203</span></span>
  </dt>
  <dd>
    <p class="comment">
minor change<br />

    </p>
    <p class="commitdetails"><strong>3</strong> lines of code changed in <span class="files">1 file</span>:</p>
    <ul class="commitdetails">
      <li>
        <strong>hardware/peripheralinterface/mouse_test</strong>:
        mouse_cntr.v&#160;<span class="change">(+3&#160;-3)</span>
      </li>
    </ul>
  </dd>

  <dt><a name="5"></a>
    <a href="user_nordstro.html" class="author">nordstro</a>
    <span class="date">2011-03-03 00:59</span>
    <span class="revisionNumberOuter">Rev.: <span class="revisionNumberInner">202</span></span>
  </dt>
  <dd>
    <p class="comment">
blehh, i'm not gonna make any more improvements tonight. hitting the sack.<br />
<br />
(reading values from the mouse -- 0xAA: "Self-test passed"   and   0x00: "Mouse ID"<br />
Unable to reset/enable the mouse as of yet, which is required to have it send useful button/pos info)
    </p>
    <p class="commitdetails"><strong>127</strong> lines of code changed in <span class="files">3 files</span>:</p>
    <ul class="commitdetails">
      <li>
        <strong>hardware/peripheralinterface/mouse_test</strong>:
        mouse.v&#160;<span class="change">(+13&#160;-8)</span>,
        mouse_cntr.v&#160;<span class="change">(+90&#160;-20)</span>,
        tick_logic.v&#160;<span class="change">(+24&#160;-4)</span>
      </li>
    </ul>
  </dd>

  <dt><a name="4"></a>
    <a href="user_nordstro.html" class="author">nordstro</a>
    <span class="date">2011-03-02 21:51</span>
    <span class="revisionNumberOuter">Rev.: <span class="revisionNumberInner">201</span></span>
  </dt>
  <dd>
    <p class="comment">
Last commit before trying to transmit "Reset mouse" upon fpga reset...
    </p>
    <p class="commitdetails"><strong>89</strong> lines of code changed in <span class="files">5 files</span>:</p>
    <ul class="commitdetails">
      <li>
        <strong>hardware/peripheralinterface/mouse_test</strong>:
        main_logic.v&#160;<span class="change">(+2&#160;-2)</span>,
        mouse.v&#160;<span class="change">(+77&#160;-13)</span>,
        mouse_cntr.v&#160;<span class="change">(+6&#160;-3)</span>,
        tick_logic.v&#160;<span class="change">(+2&#160;-2)</span>,
        vgamult.v&#160;<span class="change">(+2&#160;-2)</span>
      </li>
    </ul>
  </dd>

  <dt><a name="3"></a>
    <a href="user_nordstro.html" class="author">nordstro</a>
    <span class="date">2011-03-02 20:33</span>
    <span class="revisionNumberOuter">Rev.: <span class="revisionNumberInner">199</span></span>
  </dt>
  <dd>
    <p class="comment">
the files are set up correctly to display the last 3 bytes sent by the ps/2 controller (i've been testing this using the keyboard connected to the mouse's port). Mouse is not sending anything yet. This is likely because it requires some RESET code to be sent from the FPGA--&gt;MOUSE. Working on that next
    </p>
    <p class="commitdetails"><strong>30</strong> lines of code changed in <span class="files">4 files</span>:</p>
    <ul class="commitdetails">
      <li>
        <strong>hardware/peripheralinterface/mouse_test</strong>:
        main_logic.v&#160;<span class="change">(+4&#160;-2)</span>,
        mouse_cntr.v&#160;<span class="change">(+18&#160;-23)</span>,
        tick_logic.v&#160;<span class="change">(+7&#160;-5)</span>,
        vgamult.v&#160;<span class="change">(+1&#160;-1)</span>
      </li>
    </ul>
  </dd>

  <dt><a name="2"></a>
    <a href="user_nordstro.html" class="author">nordstro</a>
    <span class="date">2011-03-02 20:06</span>
    <span class="revisionNumberOuter">Rev.: <span class="revisionNumberInner">198</span></span>
  </dt>
  <dd>
    <p class="comment">
vga numbers hard-wired to 0. about to wire in the mouse registers
    </p>
    <p class="commitdetails"><strong>175</strong> lines of code changed in <span class="files">7 files</span>:</p>
    <ul class="commitdetails">
      <li>
        <strong>hardware/peripheralinterface/mouse_test</strong>:
        draw_logic.v&#160;<span class="change">(+50&#160;-19)</span>,
        driver.v&#160;<span class="del">(del)</span>,
        main_logic.v&#160;<span class="change">(+8&#160;-16)</span>,
        mouse_cntr.v&#160;<span class="new">(new&#160;100)</span>,
        tick_logic.v&#160;<span class="change">(+12&#160;-15)</span>,
        up_counter.v&#160;<span class="change">(+1&#160;-1)</span>,
        vgamult.v&#160;<span class="change">(+4&#160;-2)</span>
      </li>
    </ul>
  </dd>

  <dt><a name="1"></a>
    <a href="user_nordstro.html" class="author">nordstro</a>
    <span class="date">2011-03-02 18:59</span>
    <span class="revisionNumberOuter">Rev.: <span class="revisionNumberInner">193</span></span>
  </dt>
  <dd>
    <p class="comment">
Initial commit for mouse testing. Hacking the VGA code from the FPGA Tutorial to try to show the mouse bytes on the monitor.
    </p>
    <p class="commitdetails"><strong>622</strong> lines of code changed in <span class="files">10 files</span>:</p>
    <ul class="commitdetails">
      <li>
        <strong>hardware/peripheralinterface/mouse_test</strong>:
        draw_logic.v&#160;<span class="new">(new&#160;99)</span>,
        driver.v&#160;<span class="new">(new&#160;96)</span>,
        main_logic.v&#160;<span class="new">(new&#160;61)</span>,
        mouse.v&#160;<span class="new">(new&#160;84)</span>,
        simple_rom.v&#160;<span class="new">(new&#160;33)</span>,
        tick_logic.v&#160;<span class="new">(new&#160;46)</span>,
        up_counter.v&#160;<span class="new">(new&#160;16)</span>,
        vga_logic.v&#160;<span class="new">(new&#160;56)</span>,
        vgamult.ucf&#160;<span class="new">(new&#160;80)</span>,
        vgamult.v&#160;<span class="new">(new&#160;51)</span>
      </li>
    </ul>
  </dd>

</dl>

</div><div id="generatedby">Generated by <a href="http://www.statsvn.org">StatSVN</a> 0.7.0</div>
</body>
</html>