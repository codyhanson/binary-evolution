<?xml version="1.0"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>StatSVN - Directory hardware/peripheralinterface/keyboard_test/</title>
 <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"/>
    <meta name="Generator" content="StatSVN 0.7.0"/>
<link rel="stylesheet" href="objectlab-statcvs.css" type="text/css"/>
<script type="text/javascript" charset="utf-8" src="http://bit.ly/javascript-api.js?version=latest&#38;login=statsvn&#38;apiKey=R_2c362b417d0517c27876cbaca1bb68cc"></script>
<script type="text/javascript" charset="utf-8">
   // wait until page is loaded to call API
   var redir_url;
   var short_url;
   BitlyCB.myShortenCallback = function(data) {
      // this is how to get a result of shortening a single url
      var result;
      short_url=null;
      for (var r in data.results) {
         result = data.results[r];
         result['longUrl'] = r;
         short_url = result['shortUrl'];
         break;
      }
      if (short_url==null) // bit.ly failed
      document.location=redir_url;
      else
      redirToTwitter();
   };
   function shortenTweet(url) {
      if (short_url == null || redir_url!=url) {
      redir_url = url;
      BitlyClient.shorten(document.location, 'BitlyCB.myShortenCallback');
      }
      else
      redirToTwitter();
      return false;
   }
   function redirToTwitter() { 
      // replace {0} which is visible as %7B0} in the link
      document.location = redir_url.replace('%7B0}', short_url);
   }
</script>
  </head>

<body>

<h1>Directory hardware/peripheralinterface/keyboard_test/</h1>
<div id="parentlink">&#171; <a href="index.html">Development Statistics for </a></div>
<dl class="attributes">
    <dt>Directory Created:</dt>
    <dd><span class="date">2011-02-25 13:58</span></dd>
    <dt>Total Files:</dt>
    <dd>12</dd>
    <dt>Deleted Files:</dt>
    <dd>18</dd>
    <dt>Lines of Code:</dt>
    <dd>4757</dd>
</dl>
<p class="dirtree">
<a href="dir.html">[root]</a>/<a href="dir_hardware.html">hardware</a>/<a href="dir_hardware_peripheralinterface.html">peripheralinterface</a>/<strong>keyboard_test</strong><br/>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<img src="folder-deleted.png" width="15" height="13" alt="Folder removed from repo" title="Folder removed from repo"/> 
<a href="dir_hardware_peripheralinterface_keyboard_test_kbd_modelsim.html">kbd_modelsim</a> 
(0 files, 0 lines)<br />
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<img src="folder.png" width="15" height="13" alt="directory in repo" title="directory in repo"/> 
<a href="dir_hardware_peripheralinterface_keyboard_test_old.html">old</a> 
(14 files, 1179 lines)<br />
</p>

<div class="section">
<h2>Lines of Code</h2>
<p class="chart"><img src="loc_module_hardware_peripheralinterface_keyboard_test.png" alt="hardware/peripheralinterface/keyboard_test/ Lines of Code" width="800" height="500" /></p></div>
<div class="section">
<h2>Developers</h2>
  <table  rules="groups" summary="All authors and the number of their changes and lines of code in this directory">
    <colgroup align="left"/>
    <colgroup align="right"/>
    <colgroup align="right"/>
    <colgroup align="right"/>
    <thead>
      <tr>
        <th>Author</th>
        <th>Changes</th>
        <th>Lines of Code</th>
        <th>Lines per Change</th>
      </tr>
    </thead>
    <tbody>
      <tr  class="odd">
        <th><a href="user_nordstro.html" class="author">nordstro</a></th>
        <td>84 (100.0%)</td>
        <td>6740 (100.0%)</td>
        <td>80.2</td>
      </tr>
    </tbody>
  </table>

</div>
<div class="section">
<h2>Most Recent Commits</h2>
<dl class="commitlist">
  <dt><a name="17"></a>
    <a href="user_nordstro.html" class="author">nordstro</a>
    <span class="date">2011-03-07 19:12</span>
    <span class="revisionNumberOuter">Rev.: <span class="revisionNumberInner">250</span></span>
  </dt>
  <dd>
    <p class="comment">
about to make a change
    </p>
    <p class="commitdetails"><strong>84</strong> lines of code changed in <span class="files">3 files</span>:</p>
    <ul class="commitdetails">
      <li>
        <strong>hardware/peripheralinterface/keyboard_test</strong>:
        ps2_tx_tb.do&#160;<span class="new">(new&#160;49)</span>,
        ps2_tx_tb.v&#160;<span class="new">(new&#160;35)</span>,
        vgamult.ucf&#160;<span class="change">(-1)</span>
      </li>
    </ul>
  </dd>

  <dt><a name="16"></a>
    <a href="user_nordstro.html" class="author">nordstro</a>
    <span class="date">2011-03-06 19:12</span>
    <span class="revisionNumberOuter">Rev.: <span class="revisionNumberInner">245</span></span>
  </dt>
  <dd>
    <p class="comment">
TX not working yet. Gonna take a break until later tonight or tomorrow
    </p>
    <p class="commitdetails"><strong>15</strong> lines of code changed in <span class="files">1 file</span>:</p>
    <ul class="commitdetails">
      <li>
        <strong>hardware/peripheralinterface/keyboard_test</strong>:
        tick_logic.v&#160;<span class="change">(+15&#160;-11)</span>
      </li>
    </ul>
  </dd>

  <dt><a name="15"></a>
    <a href="user_nordstro.html" class="author">nordstro</a>
    <span class="date">2011-03-06 17:28</span>
    <span class="revisionNumberOuter">Rev.: <span class="revisionNumberInner">243</span></span>
  </dt>
  <dd>
    <p class="comment">
TX Framework is set up. Code keeps controller in RX constantly. About to allow it to TX when caps is hit
    </p>
    <p class="commitdetails"><strong>3</strong> lines of code changed in <span class="files">1 file</span>:</p>
    <ul class="commitdetails">
      <li>
        <strong>hardware/peripheralinterface/keyboard_test</strong>:
        tick_logic.v&#160;<span class="change">(+3&#160;-4)</span>
      </li>
    </ul>
  </dd>

  <dt><a name="14"></a>
    <a href="user_nordstro.html" class="author">nordstro</a>
    <span class="date">2011-03-06 16:03</span>
    <span class="revisionNumberOuter">Rev.: <span class="revisionNumberInner">242</span></span>
  </dt>
  <dd>
    <p class="comment">
Keyboard RX is functioning beautifully. Supported keys include:<br />
   - upper case letters<br />
   - lower case letters<br />
   - numbers<br />
   - special characters (above numbers, and &lt;[]\;',./&gt;  etc...)<br />
   - Enter: sends carriage return (regardless of shift/caps)<br />
   - Backspace (ignores sh/caps)<br />
   - Esc: (ignores sh/caps)<br />
   - Tab: (ignores sh/caps)<br />
   - CAPS lock<br />
   - Left and Right shift<br />
   - Arrow keys
    </p>
    <p class="commitdetails"><strong>16</strong> lines of code changed in <span class="files">8 files</span>:</p>
    <ul class="commitdetails">
      <li>
        <strong>hardware/peripheralinterface/keyboard_test</strong>:
        main_logic.v&#160;<span class="change">(+4&#160;-4)</span>,
        mouse.v&#160;<span class="del">(del)</span>,
        mouse_cntr.v&#160;<span class="del">(del)</span>,
        mouse_tb.do&#160;<span class="del">(del)</span>,
        mouse_tb.v&#160;<span class="del">(del)</span>,
        tick_logic.v&#160;<span class="change">(+4&#160;-4)</span>,
        vgamult.ucf&#160;<span class="change">(+4&#160;-4)</span>,
        vgamult.v&#160;<span class="change">(+4&#160;-4)</span>
      </li>
    </ul>
  </dd>

  <dt><a name="13"></a>
    <a href="user_nordstro.html" class="author">nordstro</a>
    <span class="date">2011-03-06 14:45</span>
    <span class="revisionNumberOuter">Rev.: <span class="revisionNumberInner">241</span></span>
  </dt>
  <dd>
    <p class="comment">
Reorganizing keyboard/mouse files<br />

    </p>
    <p class="commitdetails"><strong>5165</strong> lines of code changed in <span class="files">28 files</span>:</p>
    <ul class="commitdetails">
      <li>
        <strong>hardware/peripheralinterface/keyboard_test</strong>:
        brg_spart.v&#160;<span class="del">(del)</span>,
        draw_logic.v&#160;<span class="new">(new&#160;130)</span>,
        driver.v&#160;<span class="del">(del)</span>,
        keyboard.ucf&#160;<span class="del">(del)</span>,
        keyboard.v&#160;<span class="del">(del)</span>,
        keyboard_clear.v&#160;<span class="del">(del)</span>,
        keyboard_tb.do&#160;<span class="del">(del)</span>,
        keyboard_tb.v&#160;<span class="del">(del)</span>,
        main_logic.v&#160;<span class="new">(new&#160;55)</span>,
        mouse.v&#160;<span class="new">(new&#160;185)</span>,
        mouse_cntr.v&#160;<span class="new">(new&#160;181)</span>,
        mouse_tb.do&#160;<span class="new">(new&#160;63)</span>,
        mouse_tb.v&#160;<span class="new">(new&#160;65)</span>,
        numbers.mem&#160;<span class="new">(new&#160;4097)</span>,
        ps2_rx_tb.v&#160;<span class="new">(new&#160;84)</span>,
        rx_spart.v&#160;<span class="del">(del)</span>,
        simple_rom.v&#160;<span class="new">(new&#160;33)</span>,
        spart.v&#160;<span class="del">(del)</span>,
        tick_logic.v&#160;<span class="new">(new&#160;67)</span>,
        top_level.ucf&#160;<span class="del">(del)</span>,
        top_level.v&#160;<span class="del">(del)</span>,
        top_level_tb.v&#160;<span class="del">(del)</span>,
        top_level_wave.do&#160;<span class="del">(del)</span>,
        tx_spart.v&#160;<span class="del">(del)</span>,
        up_counter.v&#160;<span class="new">(new&#160;16)</span>,
        vga_logic.v&#160;<span class="new">(new&#160;56)</span>,
        vgamult.ucf&#160;<span class="new">(new&#160;80)</span>,
        vgamult.v&#160;<span class="new">(new&#160;53)</span>
      </li>
    </ul>
  </dd>

  <dt><a name="12"></a>
    <a href="user_nordstro.html" class="author">nordstro</a>
    <span class="date">2011-03-06 01:29</span>
    <span class="revisionNumberOuter">Rev.: <span class="revisionNumberInner">237</span></span>
  </dt>
  <dd>
    <p class="comment">
fixed compiler errors
    </p>
    <p class="commitdetails"><strong>5</strong> lines of code changed in <span class="files">2 files</span>:</p>
    <ul class="commitdetails">
      <li>
        <strong>hardware/peripheralinterface/keyboard_test</strong>:
        driver.v&#160;<span class="change">(+1&#160;-4)</span>,
        top_level.v&#160;<span class="change">(+4&#160;-31)</span>
      </li>
    </ul>
  </dd>

  <dt><a name="11"></a>
    <a href="user_nordstro.html" class="author">nordstro</a>
    <span class="date">2011-03-02 17:43</span>
    <span class="revisionNumberOuter">Rev.: <span class="revisionNumberInner">192</span></span>
  </dt>
  <dd>
    <p class="comment">
Tested keyboard on FGPA --&gt; it seems to read the data correctly. I changed the driver.v to convert &lt;w,a,s,d&gt; to the correct ascii, and any other key to '-'.<br />
<br />
Moving on to the mouse now. We will have to later decide whether or not to decode the input in hardware or software (i.e. ignore all repeated keys until the break code is received ---- example: sending 'A':    0x1C gets sent over and over until it is released, then 0xF0,0x1C is sent.   So we could ignore input until we see 0xF0,0x--)
    </p>
    <p class="commitdetails"><strong>36</strong> lines of code changed in <span class="files">2 files</span>:</p>
    <ul class="commitdetails">
      <li>
        <strong>hardware/peripheralinterface/keyboard_test</strong>:
        driver.v&#160;<span class="change">(+36&#160;-7)</span>,
        top_level.v&#160;<span class="change">(-1)</span>
      </li>
    </ul>
  </dd>

  <dt><a name="10"></a>
    <a href="user_nordstro.html" class="author">nordstro</a>
    <span class="date">2011-03-02 00:52</span>
    <span class="revisionNumberOuter">Rev.: <span class="revisionNumberInner">187</span></span>
  </dt>
  <dd>
    <p class="comment">
keyboard controller works in modelsim. The &lt;keyboard.v&gt; file is a basic version that simply holds RDA high for one KBD_CLK cycle.<br />
<br />
I also made a &lt;keyboard_clear.v&gt; file which holds RDA until a clear signal is sent in. I think it might be better for the MMR/IRQ logic to handle latching the RDA signal until a clear (via a bit set in MMR).<br />
<br />
Removed the modelsim project file -- it failed for me just like Eric_H's Xilinx attempt before... oh well<br />

    </p>
    <p class="commitdetails"><strong>162</strong> lines of code changed in <span class="files">4 files</span>:</p>
    <ul class="commitdetails">
      <li>
        <strong>hardware/peripheralinterface/keyboard_test</strong>:
        keyboard.v&#160;<span class="change">(+44&#160;-8)</span>,
        keyboard_clear.v&#160;<span class="new">(new&#160;98)</span>,
        keyboard_tb.do&#160;<span class="change">(+7&#160;-9)</span>,
        keyboard_tb.v&#160;<span class="change">(+13&#160;-20)</span>
      </li>
    </ul>
  </dd>

  <dt><a name="9"></a>
    <a href="user_nordstro.html" class="author">nordstro</a>
    <span class="date">2011-02-28 19:46</span>
    <span class="revisionNumberOuter">Rev.: <span class="revisionNumberInner">177</span></span>
  </dt>
  <dd>
    <p class="comment">
revamping keyboard controller<br />
also added modelsim project, with the hopes it will work.
    </p>
    <p class="commitdetails"><strong>30</strong> lines of code changed in <span class="files">4 files</span>:</p>
    <ul class="commitdetails">
      <li>
        <strong>hardware/peripheralinterface/keyboard_test</strong>:
        keyboard.v&#160;<span class="change">(+13&#160;-92)</span>,
        keyboard_tb.do&#160;<span class="change">(+9&#160;-12)</span>,
        keyboard_tb.v&#160;<span class="change">(+4&#160;-6)</span>,
        top_level_tb.v&#160;<span class="change">(+4&#160;-6)</span>
      </li>
    </ul>
  </dd>

  <dt><a name="8"></a>
    <a href="user_nordstro.html" class="author">nordstro</a>
    <span class="date">2011-02-25 18:55</span>
    <span class="revisionNumberOuter">Rev.: <span class="revisionNumberInner">164</span></span>
  </dt>
  <dd>
    <p class="comment">
Giving up on keyboard for now and switching to mouse. The keyboard sends data as "scan codes", which means we will probably want to interpret the keyboard using a LUT in software.<br />
<br />
The main changes I've recently made:<br />
 - Keyboard data needs to be sampled on FALLING edge, not rising.<br />
 - Declaring keyboard data and clk lines as "Input" for now to simplify things. The only real downside of this is we won't be able to set the Caps/Num/Scroll Lock keys.<br />

    </p>
    <p class="commitdetails"><strong>27</strong> lines of code changed in <span class="files">3 files</span>:</p>
    <ul class="commitdetails">
      <li>
        <strong>hardware/peripheralinterface/keyboard_test</strong>:
        driver.v&#160;<span class="change">(+16&#160;-9)</span>,
        keyboard.v&#160;<span class="change">(+9&#160;-9)</span>,
        top_level.v&#160;<span class="change">(+2&#160;-2)</span>
      </li>
    </ul>
  </dd>

  <dt><a name="7"></a>
    <a href="user_nordstro.html" class="author">nordstro</a>
    <span class="date">2011-02-25 17:03</span>
    <span class="revisionNumberOuter">Rev.: <span class="revisionNumberInner">163</span></span>
  </dt>
  <dd>
    <p class="comment">
Typing on FPGA's keyboard causes some output in the terminal, but it's random characters.
    </p>
    <p class="commitdetails"><strong>21</strong> lines of code changed in <span class="files">2 files</span>:</p>
    <ul class="commitdetails">
      <li>
        <strong>hardware/peripheralinterface/keyboard_test</strong>:
        keyboard.v&#160;<span class="change">(+1&#160;-1)</span>,
        top_level.ucf&#160;<span class="change">(+20&#160;-8)</span>
      </li>
    </ul>
  </dd>

  <dt><a name="6"></a>
    <a href="user_nordstro.html" class="author">nordstro</a>
    <span class="date">2011-02-25 16:51</span>
    <span class="revisionNumberOuter">Rev.: <span class="revisionNumberInner">162</span></span>
  </dt>
  <dd>
    <p class="comment">
Wired SPART's TX to RX so that when the character read from the keyboard is sent out of the SPART, it also reads it (and 0x53 correctly appears in the RX's buffer).<br />
<br />
Done with Modelsim. About to test out keyboard in Xilinx
    </p>
    <p class="commitdetails"><strong>22</strong> lines of code changed in <span class="files">5 files</span>:</p>
    <ul class="commitdetails">
      <li>
        <strong>hardware/peripheralinterface/keyboard_test</strong>:
        spart.v&#160;<span class="change">(+2&#160;-2)</span>,
        top_level.v&#160;<span class="change">(+2&#160;-1)</span>,
        top_level_tb.v&#160;<span class="change">(+7&#160;-8)</span>,
        top_level_wave.do&#160;<span class="change">(+5&#160;-8)</span>,
        tx_spart.v&#160;<span class="change">(+6&#160;-2)</span>
      </li>
    </ul>
  </dd>

  <dt><a name="5"></a>
    <a href="user_nordstro.html" class="author">nordstro</a>
    <span class="date">2011-02-25 15:39</span>
    <span class="revisionNumberOuter">Rev.: <span class="revisionNumberInner">161</span></span>
  </dt>
  <dd>
    <p class="comment">
lkasjdf<br />

    </p>
    <p class="commitdetails"><strong>4</strong> lines of code changed in <span class="files">1 file</span>:</p>
    <ul class="commitdetails">
      <li>
        <strong>hardware/peripheralinterface/keyboard_test</strong>:
        top_level_tb.v&#160;<span class="change">(+4)</span>
      </li>
    </ul>
  </dd>

  <dt><a name="4"></a>
    <a href="user_nordstro.html" class="author">nordstro</a>
    <span class="date">2011-02-25 15:37</span>
    <span class="revisionNumberOuter">Rev.: <span class="revisionNumberInner">160</span></span>
  </dt>
  <dd>
    <p class="comment">
blkje
    </p>
    <p class="commitdetails"><strong>99</strong> lines of code changed in <span class="files">5 files</span>:</p>
    <ul class="commitdetails">
      <li>
        <strong>hardware/peripheralinterface/keyboard_test</strong>:
        driver.v&#160;<span class="change">(+2&#160;-1)</span>,
        keyboard.v&#160;<span class="change">(+1&#160;-1)</span>,
        top_level.v&#160;<span class="change">(+4&#160;-4)</span>,
        top_level_tb.v&#160;<span class="change">(+2&#160;-1)</span>,
        top_level_wave.do&#160;<span class="new">(new&#160;90)</span>
      </li>
    </ul>
  </dd>

  <dt><a name="3"></a>
    <a href="user_nordstro.html" class="author">nordstro</a>
    <span class="date">2011-02-25 15:15</span>
    <span class="revisionNumberOuter">Rev.: <span class="revisionNumberInner">159</span></span>
  </dt>
  <dd>
    <p class="comment">
Created testbench for the Keyboard/SPART combo<br />

    </p>
    <p class="commitdetails"><strong>66</strong> lines of code changed in <span class="files">2 files</span>:</p>
    <ul class="commitdetails">
      <li>
        <strong>hardware/peripheralinterface/keyboard_test</strong>:
        top_level.v&#160;<span class="change">(+3&#160;-1)</span>,
        top_level_tb.v&#160;<span class="new">(new&#160;63)</span>
      </li>
    </ul>
  </dd>

  <dt><a name="2"></a>
    <a href="user_nordstro.html" class="author">nordstro</a>
    <span class="date">2011-02-25 14:56</span>
    <span class="revisionNumberOuter">Rev.: <span class="revisionNumberInner">158</span></span>
  </dt>
  <dd>
    <p class="comment">
Using a Spart to send any received keyboard packets to the terminal for testing purposes.<br />
About to test in modelsim<br />

    </p>
    <p class="commitdetails"><strong>46</strong> lines of code changed in <span class="files">2 files</span>:</p>
    <ul class="commitdetails">
      <li>
        <strong>hardware/peripheralinterface/keyboard_test</strong>:
        driver.v&#160;<span class="change">(+29&#160;-21)</span>,
        top_level.v&#160;<span class="change">(+17&#160;-3)</span>
      </li>
    </ul>
  </dd>

  <dt><a name="1"></a>
    <a href="user_nordstro.html" class="author">nordstro</a>
    <span class="date">2011-02-25 13:58</span>
    <span class="revisionNumberOuter">Rev.: <span class="revisionNumberInner">157</span></span>
  </dt>
  <dd>
    <p class="comment">
Moving keyboard stuff to a new subdirectory to avoid clutter. Adding SPART files for use in testing the keyboard<br />

    </p>
    <p class="commitdetails"><strong>939</strong> lines of code changed in <span class="files">11 files</span>:</p>
    <ul class="commitdetails">
      <li>
        <strong>hardware/peripheralinterface/keyboard_test</strong>:
        brg_spart.v&#160;<span class="new">(new&#160;63)</span>,
        driver.v&#160;<span class="new">(new&#160;166)</span>,
        keyboard.ucf&#160;<span class="new">(new&#160;30)</span>,
        keyboard.v&#160;<span class="new">(new&#160;127)</span>,
        keyboard_tb.do&#160;<span class="new">(new&#160;50)</span>,
        keyboard_tb.v&#160;<span class="new">(new&#160;95)</span>,
        rx_spart.v&#160;<span class="new">(new&#160;161)</span>,
        spart.v&#160;<span class="new">(new&#160;69)</span>,
        top_level.ucf&#160;<span class="new">(new&#160;27)</span>,
        top_level.v&#160;<span class="new">(new&#160;61)</span>,
        tx_spart.v&#160;<span class="new">(new&#160;90)</span>
      </li>
    </ul>
  </dd>

</dl>

</div><div id="generatedby">Generated by <a href="http://www.statsvn.org">StatSVN</a> 0.7.0</div>
</body>
</html>